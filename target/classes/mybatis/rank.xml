<<<<<<< HEAD
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="rank">
	<sql id="search">
	SELECT * FROM member
		<where>
			<if test="keyword != null">
			name LIKE CONCAT(CONCAT('%', #{keyword}), '%')
			</if>
		</where>
	</sql>

	<select id="list" resultType="Member">
	SELECT * FROM 
		(SELECT ROWNUM rnum, sub.* FROM
			(<include refid="search"></include>) sub)
		<![CDATA[ 
		WHERE rnum >= ((#{page} - 1 ) * #{perPage} + 1) and rnum <= (#{page} * #{perPage})]]>
		ORDER BY score
	</select>
	
<!-- 	index 순위출력 list -->
	<select id="rankList" resultType="Member">
	SELECT ROWNUM, name, score FROM 
			(SELECT * FROM member ORDER BY score) A
		where <![CDATA[ROWNUM <= 5]]>
	</select>
	
	<select id="total" resultType="Integer">
	SELECT COUNT(*) FROM member
	</select>
=======
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="rank">
	<sql id="search">
	SELECT * FROM member
		<where>
			<if test="keyword != null">
			name LIKE CONCAT(CONCAT('%', #{keyword}), '%')
			</if>
		</where>
	</sql>

	<select id="list" resultType="Member">
	SELECT * FROM 
		(SELECT ROWNUM rnum, sub.* FROM
			(<include refid="search"></include>) sub)
		<![CDATA[ 
		WHERE rnum >= ((#{page} - 1 ) * #{perPage} + 1) and rnum <= (#{page} * #{perPage})]]>
		ORDER BY score
	</select>
	
<!-- 	index 순위출력 list -->
	<select id="rankList" resultType="Member">
	SELECT ROWNUM, name, score FROM 
			(SELECT * FROM member ORDER BY score) A
		where <![CDATA[ROWNUM <= 5]]>
	</select>
	
	<select id="total" resultType="Integer">
	SELECT COUNT(*) FROM member
	</select>
>>>>>>> refs/heads/WSH
</mapper>